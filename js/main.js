(()=>{const e=(e,t)=>t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]],t="a40e2fba-71cb-4ddb-8e49-5e753ed3db24",a=(new Date).getFullYear(),n=(new Date).getMonth(),i=["January","February","March","April","May","June","July","August","September","October","November","December"][n].toUpperCase(),r=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][n];let o=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}).page;o||(o=1,history.pushState(null,null,"?page=1"));const l=document.querySelector(".app__list"),c=document.querySelector(".year"),s=document.querySelector(".month"),m=document.querySelectorAll(".app__pagination"),d=document.querySelector(".app__error"),p=document.querySelector(".app__loading");c.textContent=a,s.textContent=r,function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const r=`https://kinopoiskapiunofficial.tech/api/v2.1/films/releases?year=${a}&month=${i}&page=${n}`;fetch(r,{headers:{"Content-Type":"application/json","X-API-KEY":t}}).then((e=>e.json())).then((e=>{d.style.display="none",p.style.display="none";const t=e.total;for(let e=Math.ceil(t/10);e>=1;e--)m.forEach((t=>{t.insertAdjacentHTML("afterbegin",`\n          <li class="app__pagination-item">\n            <a href="?page=${e}" class="app__pagination-link ${e==o?"app__pagination-link--current":""}">${e}</a>\n          </li>\n        `)}));return e})).then((t=>{for(item of t.releases){const t={month:"long",day:"numeric"};let a=new Date(item.releaseDate).toLocaleDateString("ru-RU",t),n=item.rating?item.rating.toFixed(1):"Недостаточно голосов",i=`${item.duration} ${e(item.duration,["минута","минуты","минут"])}`,r=item.genres.map((e=>Object.values(e)[0])).toString().replace(",",", ");l.insertAdjacentHTML("afterbegin",`\n        <li class="app__list-item">\n          <article class="app__card movie-card">\n            <a href="https://www.kinopoisk.ru/film/${item.filmId}" target="_blank" class="movie-card__link">\n              <div class="movie-card__image-wrapper">\n                <img\n                  src="${item.posterUrlPreview}"\n                  alt="${item.nameRu?item.nameRu:item.nameEn}" loading="lazy" class="movie-card__image">\n                <div class="movie-card__hover">\n                  <div class="movie-card__rating ${null==item.rating?"movie-card__rating--null":""}">${n}</div>\n                  <div class="movie-card__genres">${r}</div>\n                  <div class="movie-card__duration ${0==item.duration?"movie-card__duration--hidden":""}">${i}</div>\n                </div>\n              </div>\n              <h2 class="movie-card__title">${item.nameRu?item.nameRu:item.nameEn}</h2>\n              <div class="movie-card__date">${a}</div>\n            </a>\n          </article>\n        </li>\n      `)}})).catch((()=>{d.style.display="block",p.style.display="none"}))}(o)})();